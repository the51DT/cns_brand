<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title><%= data.title %></title>
    <meta name="description" content="<%= data.description %>">
    <link rel="stylesheet" href="/src/assets/css/index.scss" />
    <link rel="shortcut icon" href="/src/assets/image/favicon.ico">
</head>
<body class="dark-mode">
    <div class="wrap has-hero bizinfo-LG-way">
        <%- include('src/_inc/header.html') %>
        <!-- //헤더 영역 -->
        <!-- //비주얼 영역 -->
        <div class="sub-content__wrap">
            <div class="bizinfo-LG-way__container">
                <!-- 내비 -->
                <div class="full-sec__pagination">
                    <div class="full-sec__pagination--item font-caption-xl is-active">LG 비전</div>
                    <div class="full-sec__pagination--item font-caption-xl">행동방식</div>
                    <div class="full-sec__pagination--item font-caption-xl">경영이념</div>
                </div>
                <!-- //내비 -->
                <!-- 이미지 -->
                <!-- <div class="full-sec__img">
                    <div class="full-sec__img--01"></div>
                    <div class="full-sec__img--02"></div>
                    <div class="full-sec__img--03 is-active"></div>
                </div> -->
                <!-- //이미지 -->
                <div class="bizinfo-LG-way__section full-sec bizinfo-LG-way__section--01">
                    <div class="inner-wrap">
                        <div class="bizinfo-LG-way__textarea">
                            <h2 class="font-head-xl font-bold">LG Way</h2>
                            <p class="font-head-sm font-medium">
                                LG 고유의 경영철학이자, 전 임직원이 지키고<br/>
                                실천해야 할 사고와 행동의 기반입니다.
                            </p>
                            <p class="font-body-sm">
                                경영이념인 ‘고객을 위한 가치창조’와 ‘인간존중의 경영’을<br/>
                                LG의 행동방식인 ‘정도경영’으로 실천함으로써 LG의 비전인<br/>
                                ‘일등LG’를 달성하자는 것입니다.
                            </p>
                        </div>
                    </div>
                    <div class="button__wrap button__wrap--scroll-down">
                        <button type="button" class="">
                            <i class="ico icon-arrow-down-wh48"></i>
                            <span class="ir-text">다음 화면 보기</span>
                        </button>
                    </div>
                </div>
                <div class="bizinfo-lg-way-fullbox">
                    <div class="cmp-swiper__wrap">
                        <div class="swiper">
                            <div class="swiper-wrapper">
                                <div class="swiper-slide">
                                    1
                                </div>
                                <div class="swiper-slide">
                                    2
                                </div>
                                <div class="swiper-slide">
                                    3
                                </div>
                            </div>
                            <div class="swiper-pagination"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bizinfo-LG-way__section last-sec">
                <div class="inner-wrap">
                    <div class="bizinfo-LG-way__textarea">
                        <h2 class="font-head-sm font-bold">LG 임직원의 부당한 요구,</h2>
                        <p class="font-body-lg font-medium">
                            또는 불공정 업무처리로 불편함을 겪고있다면, 사이버 신문고를 두드려 보세요!<br>
                            고객님의 소중한 한마디가 새로운 기업문화의 밑거름이 됩니다.
                        </p>
                    </div>
                    <div class="button__wrap align-left">
                        <a href="#" class="btn btn-trans btn-small"> <!-- 버튼패딩 다름 -->
                            사이버 신문고 바로가기
                            <i class="ico icon-arrow-right-wt16"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <%- include('src/_inc/footer.html', Object.assign({}, locals, {
            type : 'transparent-color-wh',
        }))%>
    </div>
    <style>
        .bizinfo-lg-way-fullbox {
            width: 100%;
            border-top: 1px solid #fff;
            border-bottom: 1px solid #fff;
            top: 0;
            left: 0;
            background-color: red;
            border: 2px solid red;
        }
        .bizinfo-lg-way-fullbox.is-fixed {
            position: fixed;
            top: 0;
            left: 0;
            padding-bottom: 300vh;
            background-color: red;
            border: 2px solid red;
        }
        .cmp-swiper__wrap,
        .swiper {
            width: 100%;
            height: 100vh;
            max-width: 100%;
        }
        .cmp-swiper__wrap  .swiper-slide {
            width: 100%;
            text-align: center;
            font-size: 18px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            height: 100vh;
        }
    </style>
    <script src="/assets/bundle/swiper-bundle.min.js"></script>
    <!-- <script src="/assets/js/initializeSwipers.js"></script> -->
    <script>      
    let swiperInstance = null;
    let allowWheel = false;

    const swiperContainer = document.querySelector('.bizinfo-lg-way-fullbox');

    const initializeControlledSwiper = () => {
        swiperInstance = new Swiper('.swiper', {
            direction: 'vertical',
            loop: false,
            slidesPerView: 1,
            mousewheel: true,
            pagination: {
            el: '.swiper-pagination',
            clickable: true,
            },
            on: {
            reachEnd: () => {
                console.log('마지막 슬라이드에서 아래로 → 휠 비활성화');
                allowWheel = false;
                swiperInstance.mousewheel.disable();
            },
            reachBeginning: () => {
                console.log('첫 슬라이드에서 위로 → 휠 비활성화');
                allowWheel = false;
                swiperInstance.mousewheel.disable();
            },
            },
        });
        };

        const checkScrollPosition = () => {
        const rect = swiperContainer.getBoundingClientRect();
        const inView = rect.top <= 0 && rect.bottom > window.innerHeight / 2;

        if (inView && !allowWheel) {
            allowWheel = true;
            swiperInstance.mousewheel.enable();
            console.log('스와이퍼 영역 진입 → 휠 활성화');
        } else if (!inView && allowWheel) {
            allowWheel = false;
            swiperInstance.mousewheel.disable();
            console.log('스와이퍼 영역 벗어남 → 휠 비활성화');
        }
        };

        const handleWheelDirection = (event) => {
        if (!swiperInstance || !allowWheel) return;

        const isLast = swiperInstance.isEnd;
        const isFirst = swiperInstance.isBeginning;
        const delta = event.deltaY;

        if (isLast && delta > 0) {
            allowWheel = false;
            swiperInstance.mousewheel.disable();
            console.log('아래로 휠 → 다음 섹션 이동을 허용');
        }

        if (isFirst && delta < 0) {
            allowWheel = false;
            swiperInstance.mousewheel.disable();
            console.log('위로 휠 → 이전 섹션으로 이동을 허용');
        }
        };

        document.addEventListener('DOMContentLoaded', () => {
        initializeControlledSwiper();
        checkScrollPosition();

        window.addEventListener('scroll', checkScrollPosition);
        window.addEventListener('wheel', handleWheelDirection, { passive: false });
        });
    </script>       
</body>
</html>